SDカード-ディスクエミュレータに関して

FAT(FAT16/FAT32)フォーマットされたMicroSDカード(MicroSDHC含む)上にディスクイメージを作成し、
FDD、SASI-HDD、SRAMのエミュレーションを行う機能です。
FPGA上で動作するNios IIプロセッサによるソフトウェアエミュレーションです。
FDDエミュレーションはユーザインターフェイスは完成していますがまだ機能しません。

エミュレーションは電源投入時から動作しますが、本体とエミュレータで
画面・キーボードを共有しますのでどちらに接続するかは本体の説明を参照してください。

1.使用方法
DE0-CVの電源投入前にMicroSDカードコネクタにフォーマット済みの(内容が破壊されても良い)
SDカードを挿入します。
電源を投入すると、設定ファイル(ルートディレクトリの「.config.xxx」(xxx部は本体の機種によって
異なる)を開きます。なければ自動で作成します。

エミュレータ画面には、設定ファイルに書かれた各ドライブの状況が表示されます。
各ドライブのエミュレーション動作中はドライブリストの左側が赤く点灯します。
ドライブエミュレーション中はキーボードが反応しないことが有ります。

キーボードのカーソルキー上下で操作するドライブを変更し、[Enter]又は[スペース]で
ドライブの状態変更が出来ます。最下行にすると、設定ファイルのLOAD,STORE及びSDカードの再マウント
(メディアの交換後に実行)が選択できます。

変更項目はドライブの種類によって変わります。
・NONE(FDD,HDD)     ドライブ無し
・DRIVE 0(FDD)      物理ドライブ0に接続
・DRIVE 1(FDD)      物理ドライブ1に接続
・FILE(FDD,HDD,SRAM)ファイルを選択し、ドライブに割り当てる
・NEW(FDD,HDD,SRAM) 新規ファイル作成、又はファイル名直接入力しドライブに割り当てる
・EJECT(FDD)        ドライブ有、イジェクト状態
・STORE(SRAM)       SRAMの値をファイルに保存
・LOAD(SRAM)        SRAMにファイルを読み込む

2.SRAMに関して
SRAM(nvram)の内容は自動ではファイルに保存されません。保存する必要が有る場合は必ず
「STORE」を実行してください。

3.SASI HDDに関して
現在RESET信号に対応していない為、ドライブがビジー状態でリセットを掛けたりすると
ビジー状態のままフリーズ状態になってしまいます。
一度電源を落として(プッシュスイッチのKEY0でもOK)電源を再投入してください。